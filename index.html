<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Generador de Propuestas de Movimiento</title>
  <style>
  :root{
    --bg: #0a0a0a;
    --text: #00ff00;
    --btn: #111111;
  }

  body{
    margin: 0;
    min-height: 100vh;
    background: var(--bg);
    color: var(--text);
    font-family: "Courier New", Courier, monospace;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 28px;
    gap: 16px;
  }

  h1{
    margin: 0;
    font-size: 22px;
  }

  button{
    background: var(--btn);
    color: var(--text);
    border: 1px solid var(--text);
    padding: 12px 16px;
    font-size: 16px;
    cursor: pointer;
  }

  button:active{
    transform: translateY(1px);
  }

  pre{
    width: min(560px, 100%);
    background: #050505;
    border: 1px solid #1f1f1f;
    padding: 16px;
    font-size: 16px;
    white-space: pre-wrap;
  }
</style>

</head>

<body>
  <h1>Generador de Propuestas</h1>

  <button id="btn">GENERAR PROPUESTA</button>
  <button id="copy">COPIAR</button>

  <pre id="out">Pulsa el bot√≥n‚Ä¶</pre>

  <script>
  const conceptos = ["Peso","Suspensi√≥n","Rebote","Aislamiento","Espiral","Oposici√≥n","Pausa","Fractura","Continuidad","Desplazamiento"];
  const calidades = ["L√≠quido","Staccato","Pesado","El√°stico","Nervioso","Flotante","Mec√°nico","Denso","Ligero"];
  const restricciones = ["Sin manos","Sin saltos","Sin giros","Un solo nivel","Mirada fija","Solo diagonales","Sin desplazarte","Solo una articulaci√≥n (tobillos/rodillas/cadera)"];
  const estructuras = ["Llamada‚Äìrespuesta","Canon","Acumulaci√≥n","Espejo","Un√≠sono roto","Impro guiada","Solo/Grupo alternando","Frase A / Frase B"];
  const espacios = ["Suelo","Medio","Alto","C√≠rculo","L√≠neas","Esquinas","Cerca/lejos","Frente/perfil/espalda"];
  const tiempoMusica = ["Silencio","Metr√≥nomo","Palmadas","Cambios cada 16","Congelado 8s cada 32","3 tempos (lento‚Üímedio‚Üír√°pido)","M√∫sica aleatoria"];

  function pick(lista) {
    const i = Math.floor(Math.random() * lista.length);
    return lista[i];
  }

  function generarPropuesta() {
    return [
      "üü© PROPUESTA",
      "",
      `Concepto: ${pick(conceptos)}`,
      `Calidad: ${pick(calidades)}`,
      `Restricci√≥n: ${pick(restricciones)}`,
      `Estructura: ${pick(estructuras)}`,
      `Espacio: ${pick(espacios)}`,
      `Tiempo/M√∫sica: ${pick(tiempoMusica)}`
    ].join("\n");
  }

  const btn = document.getElementById("btn");
  const out = document.getElementById("out");
  const copyBtn = document.getElementById("copy");

  // 1) Generar
  btn.addEventListener("click", () => {
    out.textContent = generarPropuesta();
  });

  // 2) Copiar
  async function copiarTexto(text) {
  // M√©todo moderno (cuando iOS lo permite)
  if (navigator.clipboard && window.isSecureContext) {
    await navigator.clipboard.writeText(text);
    return;
  }

  // Fallback robusto para iOS
  const ta = document.createElement("textarea");
  ta.value = text;

  // Evita que haga scroll / zoom raro en iOS
  ta.setAttribute("readonly", "");
  ta.style.position = "fixed";
  ta.style.top = "-1000px";
  ta.style.left = "-1000px";
  ta.style.opacity = "0";

  document.body.appendChild(ta);

  ta.focus();
  ta.select();
  ta.setSelectionRange(0, ta.value.length); // iOS necesita esto a veces

  const ok = document.execCommand("copy");
  document.body.removeChild(ta);

  if (!ok) throw new Error("execCommand copy failed");
}


  copyBtn.addEventListener("click", async () => {
    const text = out.textContent;
    if (!text.trim() || text.includes("Pulsa el bot√≥n")) return;

    try {
      await copiarTexto(text);
      copyBtn.textContent = "COPIADO ‚úì";
      setTimeout(() => copyBtn.textContent = "COPIAR", 1200);
    } catch (e) {
      alert("No se pudo copiar");
    }
  });


  </script>
</body>
</html>
